<?xml version='1.0' encoding='UTF-8' ?> 
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">

    <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css"></link>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"> </link>
    <link href="https://vjs.zencdn.net/7.6.5/video-js.css" rel="stylesheet"> </link>
    <script src="https://kit.fontawesome.com/a076d05399.js"></script>
    <script src="https://code.jquery.com/jquery-3.5.0.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>


    <link href="/hagana/restrict/css/style.css" rel="stylesheet" type="text/css"/>


    <h:head>
        <title>Busca</title>
    </h:head>

    <h:body>



        <div class="w3-main"  >
            <div class="w3-card  menu w3-top" style="padding-left:6px;">
                <button id="openNav" class="w3-xlarge w3-button w3-hover-white btBar w3-border-0" onclick="w3_open()" style="outline: none" >&#9776;</button>              
            </div>
            <div class="w3-sidebar w3-card-4  w3-collapse w3-animate-left" style="width:200px;"  id="sideBar" >
                <div class="btBarGradiente  ">
                    <div class="w3-container " onclick="w3_close()">
                        <i class="fas fa-angle-left" style="font-size:30px;padding-top:4%;color: white; "></i>
                    </div>
                </div>

                <ul>
                    <li class="icone"><a href="dashboard.xhtml"><span><b class="fas fa-stream w3-text-blue-grey"></b></span>   <b class="textoMenu" style="color:#0bd6e2" >Dashboard</b></a></li>
                    <li class="icone"><a href="index.xhtml"><span><b class="fas fa-hdd w3-text-blue-grey"></b></span>   <b class="textoMenu" >Dispositivos</b></a></li>                   
                    <li class="icone"><a href="arquivos.xhtml"  onclick="rc()" ><span><b class="fas fa-clone w3-text-blue-grey"></b></span>   <b class="textoMenu" >Arquivos</b></a></li>
                    <li class="icone"><a href="map.xhtml"><span><b class="fas fa-sitemap w3-text-blue-grey"></b></span>   <b class="textoMenu" >Mapa</b></a></li>
                    <li class="icone"><a href="fotos.xhtml"><span><b class="fas fa-camera-retro w3-text-blue-grey" ></b></span>   <b class="textoMenu" >Fotos</b></a></li>
                    <h:panelGroup rendered="#{loginBean.usuarioLogado.gerenciarUsuario == true}">
                        <li class="icone"><a href="manager.xhtml"><span><b class="fas fa-user-plus w3-text-blue-grey"></b></span><b class="w3-text-blue-grey" style="padding-left:9px" > Usuários</b></a></li>
                    </h:panelGroup>

                    <li class="icone"><a href="login.xhtml"><span><b class="far fa-user w3-text-purple"></b></span>   <b class="w3-text-purple" style="padding-left:9px" > Olá, #{loginBean.dadosUsuario}</b></a></li>



                    <div class="w3-padding">

                        <div id="demoDrop" >

                            <h:form>
                                <b class="fas fa-power-off" style="margin-left:10px;color:#fe5000"></b>
                                <h:commandLink 
                                    action="#{loginBean.sair()}"
                                    value="Sair"                                     
                                    style="font-size: 18px;padding-left:20px;color:#fe5000"> 
                                </h:commandLink>
                            </h:form> 
                        </div>
                    </div>
                </ul>
            </div>

            <p:growl id="growl" showDetail="true"  /> 
            <footer class=" w3-bottom">  
                <a class="w3-btn w3-white w3-border w3-border-blue w3-round-xlarge w3-text-blue" href="clientes.xhtml"  style="font-size:16px;text-decoration: none;margin: 5px">#{clienteBean.clienteSelecionado.conta}</a>
            </footer>


            <div class="w3-main" style="margin-left:200px" id="main" >      

                <div class="w3-mobile w3-white w3-section w3-row-padding w3-left " style="width:100%;padding-top:50px;padding-left:0px;padding-right:0;padding-bottom: 5px ">

                    <div class="" style="height:40px;margin-bottom: 20px;margin-left:5px" id="navCliente">                        
                        <a class="w3-button w3-xlarge w3-round-large w3-text-white w3-hover-pink" href="clientes.xhtml"  
                           style="font-size:16px;text-decoration: none;margin-left: -12px;background: #0bd6e2">#{loginBean.dadosCliente}</a>
                    </div>


                    <!-- Inicio usuarios -->
                    <div class="w3-twothird"  style="padding:5px;">
                        <!-- Head usuarios -->
                        <header id="DH1" class="w3-container w3-border-bottom w3-border-light-blue" style="background-color:#F7F7F3; ">

                            <h:form>
                                <h:panelGroup rendered="#{true == true}">
                                    <h:commandLink     action="#{userBean.limpar()}" 
                                                       title="Adicionar usuario"  
                                                       onclick="abreModal('mUser')"
                                                       style="word-spacing:10px;padding-right:0px;padding-left: 0px;margin-top:12px; "
                                                       class="iconeHead fas fa-plus-circle w3-right ">

                                        <f:ajax  render="formCadUser" /> 
                                    </h:commandLink>
                                </h:panelGroup>

                            </h:form>
                            <h3 class="textoMenu">Usuarios</h3>
                        </header>
                        <!-- Head usuarios -->

                        <!-- Inicio grid usuarios -->
                        <h:form id="formUser">
                            <h:dataTable id="dataDis" var="user" binding="#{userBean.dataTable}" value="#{userBean.userList}" style="width: 100%;background-color:#FFF;margin-top: 10px"
                                         styleClass="book-table"
                                         headerClass="book-table-header"
                                         rowClasses="book-table-odd-row,book-table-even-row">


                                <h:column>

                                    <div class="itemCor itemDim w3-block w3-left-align">
                                        <i class="far fa-user iconeEdit" style="padding-top:10px;padding-left: 12px"></i> <b class="iconeConfig">#{user.nome}</b>


                                        <h:panelGroup rendered="#{loginBean.usuario.gerenciarUsuario == true}">
                                            <p:commandLink  
                                                actionListener="#{userBean.selecionarUsuario()}" ajax="true"  update="formCadUser"
                                                title="Editar usuario" style=";padding-right:18px;font-size:18px;padding-top:10px"
                                                class="iconeConfig w3-right fas fa-cog"
                                                onclick="abreModal('mUser')">  
                                            </p:commandLink>
                                        </h:panelGroup>
                                    </div>

                                </h:column>

                            </h:dataTable>
                        </h:form>

                        <!-- Fim grid usuarios -->

                    </div>
                    <!-- Fim usuarios -->

                    <div class="w3-third w3-mobile  w3-white  " style="padding-right:1px;padding-left:0px; " >

                        <div class="w3-row" style="padding-top:0px;padding-right:0px;padding-left:0px">

                            <div class=" w3-twothird " style="padding-left:1px;padding-right:1px;padding-top:0%;width:100%; ">

                                <header class="w3-container w3-border-ligth-grey w3-border-bottom w3-border-lime" style="background-color:#F7F7F3;">
            
                                    <h3 class="textoMenu">Logs de usuários</h3>
                                </header>
                            </div>
                        </div>

                    </div>
                </div>
            </div>

            <!-- Modal user -->
            <div id="mUser" class="w3-modal">  
                <div class="w3-modal-content w3-animate-zoom "  >

                    <div  class=" w3-white w3-border-bottom w3-border-rigth " >

                        <div class="headModal">
                            <i class="fas fa-times-circle w3-right minimiza" onclick="document.getElementById('mUser').style.display = 'none'"></i>

                            <p class="w3-text-white w3-center w3-padding" style="font-family: 'Roboto Slab';font-size: 18px">Cadastrar novo usuário</p>
                        </div>

                        <br></br>

                        <div class=" w3-left w3-white w3-mobile"  style="width:100%">
                            <div>
                                <h:form id="formCadUser">

                                    <table class="w3-table">

                                        <tr>
                                            <td class="w3-right-align"><b>Nome:</b></td>
                                            <td><p:inputText id="nome" disabled="#{userBean.user.perfil == 1}" type="text" value="#{userBean.user.nome}" autocomplete="off" required="true" class="inp"> 
                                                    <f:validateLength minimum="2" />
                                                </p:inputText>
                                                <p:message for="nome" styleClass="validate"/>
                                            </td>

                                        </tr>

                                        <tr>
                                            <td class="w3-right-align"><b>Login:</b></td>
                                            <td><p:inputText id="login" disabled="#{userBean.user.perfil == 1}"  type="text" value="#{userBean.user.idusuario}" class="inp">
                                                    <f:validateLength minimum="2" />
                                                </p:inputText>
                                                <p:message for="login" styleClass="validate"/>
                                            </td>
                                        </tr>

                                        <tr>
                                            <td class="w3-right-align"><b>Senha:</b></td>
                                            <td><p:inputText id="pass" type="password" value="#{userBean.user.password}" class="inp">
                                                    <f:validateLength minimum="2" />
                                                </p:inputText>
                                                <p:message for="pass" styleClass="validate"/>
                                            </td>
                                        </tr>  
                                        <tr>
                                            <td class="w3-right-align"><b>Adicionar itens:</b></td>
                                            <td><h:selectBooleanCheckbox disabled="#{userBean.user.perfil == 1}" value="#{userBean.user.adicionar}" class="check"/></td>
                                        </tr>  
                                        <tr>
                                            <td class="w3-right-align"><b>Editar itens:</b></td>
                                            <td><h:selectBooleanCheckbox disabled="#{userBean.user.perfil == 1}" value="#{userBean.user.gerenciarItens}" class="check"/></td>
                                        </tr>                                   
                                        <tr>
                                            <td class="w3-right-align"><b>Enviar arquivos</b></td>
                                            <td><h:selectBooleanCheckbox disabled="#{userBean.user.perfil == 1}" value="#{userBean.user.enviarArquivos}" class="check"/></td>
                                        </tr> 
                                        <tr>
                                            <td class="w3-right-align"><b>Ver senhas:</b></td>
                                            <td><h:selectBooleanCheckbox disabled="#{userBean.user.perfil == 1}" value="#{userBean.user.verSenhas}" class="check"/></td>
                                        #{loginBean.usuario.perfil == 1}
                                        </tr> 
                                        
                                        <tr>
                                            <td class="w3-right-align"><b>Gerenciar usuários:</b></td>
                                            <td><h:selectBooleanCheckbox disabled="#{userBean.user.perfil == 1}" value="#{userBean.user.gerenciarUsuario}" class="check"/></td>
                                        </tr> 
                                        <tr>
                                            <td class="w3-right-align"><b>Gerenciar clientes:</b></td>
                                            <td><h:selectBooleanCheckbox disabled="#{userBean.user.perfil == 1}" value="#{userBean.user.gerenciarCliente}" class="check"/></td>
                                        </tr> 
                                        <tr>
                                            <td class="w3-right-align" ><b>Bloqueado:</b></td>
                                            <td><h:selectBooleanCheckbox disabled="#{userBean.user.perfil == 1}" value="#{userBean.user.bloqueado}" class="check" /></td>
                                        </tr> 

                                    </table>


                                    <br></br>
                                    <div class="w3-right w3-padding"> 

                                         
                                        <p:commandButton value="Excluir" disabled="#{loginBean.usuario.perfil == 1}" onclick="abreModal('ex01')"  class="botao">                                   
                                        </p:commandButton> 
                                        <p:commandButton  value="Atualizar" ajax="false" action="#{userBean.atualizar()}" class="botao">
                                        </p:commandButton> 
                                        <p:commandButton  update="formCadUser, formUser"  value="Cadastrar" ajax="true" action="#{userBean.adicionar()}" class="botao">                                    
                                        </p:commandButton>

                                    </div>
                                    <p:messages  showDetail="true" closable="true"/>
                                    <br></br>
                                    <br></br>

                                    <!-- Modal excluir usuário -->
                                    <div id="ex01" class="w3-modal w3-round-xlarge" >
                                        <div class="w3-modal-content w3-round-large"  style="width: 500px;margin-top:150px">
                                            <header class="w3-container w3-pink" style="color:#FFFFFF;margin-bottom:20px;"> 

                                                <h3 class="w3-text-white">Excluir usuário ? #{userBean.user.nome}</h3>
                                            </header>
                                            <div class="w3-container"  style="width: 100%;padding-right: 10px;padding-left: 10px;">
                                                <br></br>
                                                <p:commandButton   value="Sim"  actionListener="#{userBean.deletar()}"  class="botaoExcluir w3-right w3-hover-pink"   onclick="document.getElementById('m003').style.display = 'none'" >

                                                </p:commandButton>
                                                <p:commandButton   value="Não"  class="botaoExcluir w3-right"
                                                                   onclick="document.getElementById('ex01').style.display = 'none'">
                                                </p:commandButton>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- Fim modal excluir usuário -->
                                </h:form>
                                <br></br>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- fim modal user -->

        </div>  
        <!-- fim main -->
        <br></br>  

        <style>
            .check{
                height: 30px;
                width: 30px;
            }
        .ui-growl-item-container{

                background-color: #121313; 
                border-radius:8px;
                font-size: 16px;
                color: #ff0068; 
                font-family: 'Roboto Slab';
            }
        </style>


        <script>


            function w3_open() {

                document.getElementById("sideBar").style.display = "block";
                var x = document.getElementById("main");

                x.className = x.className.replace("  w3-white  ", " w3-hide ");
                document.getElementById("sideBar").style.width = "200px";
                document.getElementById("main").style.marginLeft = "200px";


            }

            function w3_close() {
                document.getElementById("sideBar").style.display = "none";
                var x = document.getElementById("sideBar");

                x.className = x.className.replace("w3-hide", " w3-white ");
                document.getElementById("sideBar").style.width = "0px";
                document.getElementById("main").style.marginLeft = "0px";

            }

            $(function () {
                var $refreshButton = $('#refresh');
                var $results = $('#css_result');

                function refresh() {
                    var css = $('style.cp-pen-styles').text();
                    $results.html(css);
                }

                refresh();
                $refreshButton.click(refresh);

                // Select all the contents when clicked
                $results.click(function () {
                    $(this).select();
                });
            });


            function acord(id) {
                var x = document.getElementById(id);

                var bt = document.getElementById('BT' + id);

                if (x.className.indexOf(" w3-show ") === -1) {
                    x.className = x.className.replace(" w3-hide ", " w3-show ");
                    bt.className = bt.className.replace("", " w3-card-2 w3-lime ");
                } else {
                    x.className = x.className.replace(" w3-show ", " w3-hide ");

                    bt.className = bt.className.replace(" w3-card-2 w3-lime ", "");
                }
            }

            function abreModal(id) {
                document.getElementById(id).style.display = 'block';
            }
            function acordFechar(id) {
                var x = document.getElementById(id);
                x.className = x.className.replace(" w3-show ", " w3-hide ");
            }



        </script>
    </h:body>



</html>
